

###########################################################################
# build the pdf

# see: https://wiki.contextgarden.net/Running_ConTeXt

rule context
  command = context --path=.. $in

build jsonEcho.pdf : context ../jsonEcho.tex

###########################################################################
# generate the code files

rule lpic
  command = tmgt $in

build jeClass.c jeClass.h jeMain.c : lpic jsonEcho.tex


###########################################################################
# build the "library"

rule compile
  command = gcc $cflags -c $in -o $out

build jeClass.o : compile jeClass.c | jeClass.h

###########################################################################
# build the main

build jeMain.o : compile jeClass.c | jeClass.h

###########################################################################
# link

rule link
  command = gcc

build jsonEcho : link jeMain.o jeClass.o
